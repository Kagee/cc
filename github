if not http then
  error("The Computercraft HTTP API is not enabled")
end

local args, path, branch, repo, user = {...}

function main()
  if user == "--update" then
    update_self()
  elseif path == nil then
    print("Arguments: <user> <repo> <branch> <path>")
    print("If user is --update script will update itself")
  else
    dowload(path)
  end
end

function download(p)
  url = "https://raw.github.com/"..user.."/"..repo.."/"..branch.."/"..p
  local content = http.get(url)
  fs.delete(p)
  local file = fs.open(p, "w")
  file.write(content.readAll())
  file.close()
end

function update_self()
  print("Called without arguments, will update self")
  user="Kagee";repo="cc";branch="master";
  download("github")
end

main()
